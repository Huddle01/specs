---
title: MediaNode RPC Endpoints for Orchestrator
---

The media node exposes several RPC endpoints to handle requests from the Orchestrator.

## createRoom

Creates a new room.

```proto
message CreateRoomRequest {
    string roomId = 1;
}

message CreateRoomResponse {
   string roomId = 1;
}
```

## joinRoom
 Joins an existing room.


```proto
message JoinRoomRequest {
   string roomId = 1;
   string peerId = 2;
 }

message JoinRoomResponse {
   string roomId = 1;
   string peerId = 2;
   ProtoRtpCapabilities rtpCapabilities = 4;
}
```

## createTransportOnServer
 Creates a transport on the server.

```proto
message CreateTransportRequest {
   string roomId = 1;
   string peerId = 2;
   string transportType = 3;
   ProtoSctpCapabilities sctpCapabilities = 4;
}

message CreateTransportResponse {
   string peerId = 1;
   ProtoTransportSDPInfo transportSDPInfo = 4;
}
```

## connectTransportOnServer
 Connects a transport on the server.

```proto
message ConnectTransportRequest {
   string peerId = 1;
   string roomId = 2;
   string transportType = 3;
   ProtoDtlsParameters dtlsParameters = 4;
}

message ConnectTransportResponse {
   string peerId = 1;
   string transportId = 2;
}
```

## produce
 Produces media.

```proto
message ProduceRequest {
   string peerId = 1;
   string roomId = 2;
   string kind = 3;
   bool paused = 4;
   string label = 5;
   ProtoRtpParameters rtpParameters = 6;
}

message ProduceResponse {
   string peerId = 1;
   string producerId = 2;
   string label = 3;
}
```

## produceData
 Produces data.

```proto
message ProduceDataRequest {
   string peerId = 1;
   string roomId = 2;
   string label = 3;
   string protocol = 4;
   ProtoSctpStreamParameters sctpStreamParameters = 5;
   string transportId = 6;
   map<string, string> appData = 7;
}

message ProduceDataResponse {
   string id = 1;
   string dataProducerId = 2;
   ProtoSctpStreamParameters sctpStreamParameters = 3;
   string label = 4;
   string protocol = 5;
   map<string, string> appData = 6;
   string peerId = 7;
}
```

## consume
 Consumes media.

**Request:** ConsumeRequest
```proto
message ConsumeRequest {
   string peerId = 1;
   string roomId = 2;
   string producerPeerId = 3;
   string producerId = 4;
   string momoId = 5;
   string label = 6;
}

message ConsumeResponse {
   string peerId = 1;
   string label = 2;
   string consumerId = 3;
   string producerId = 4;
   string producerPeerId = 5;
   string kind = 6;
   ProtoRtpParameters rtpParameters = 7;
}
```

## createPipeTransport
 Creates a pipe transport.


```proto
message CreatePipeTransportRequest {
    string roomId = 1;
    string remoteIp = 2;
    string remoteMomoId = 3;
 }

message CreatePipeTransportResponse {
   string roomId = 1;
   string localMomoId = 2;
   string remoteMomoId = 3;
   string transportId = 4;
   ProtoSrtpParameters srtpParameters = 5;
   ProtoTransportTuple tuple = 6;
}
```
## connectPipeTransport
 Connects a pipe transport.

```proto
message ConnectPipeTransportRequest {
   string roomId = 1;
   string remoteIp = 2;
   string remoteMomoId = 3;

   string transportId = 4;
   ProtoSrtpParameters srtpParameters = 5;
   ProtoTransportTuple tuple = 6;
}

message ConnectPipeTransportResponse {
   string roomId = 1;
   string remoteMomoId = 2;
   string remoteMomoIp = 3;
}
```
## pipeConsumer
 Pipes a consumer.

```proto
message PipeConsumeRequest {
   string roomId = 1;
   string remoteMomoId = 2;
   string producerId = 3;
   string producerPeerId = 4;
}

message PipeConsumeResponse {
   string roomId = 1;
   string producerPeerId = 2;
   ProtoRtpParameters rtpParameters = 3;
   string label = 4;
   string kind = 5;
}
```

## pipeProducer
 Pipes a producer.

```proto
message PipeProduceRequest {
   string roomId = 1;
   string kind = 2;
   string remoteMomoId = 3;
   string producerId = 4;
   string producerPeerId = 5;
   ProtoRtpParameters rtpParameters = 6;
   string label = 7;
}

message PipeProduceResponse {
   string roomId = 1;
   string pipeProducerId = 2;
   bool status = 3;
}
```
## closeProducer
 Closes a producer.

```proto
message CloseProducerRequest {
   string peerId = 1;
   string roomId = 2;
   string producerId = 3;
   string momoId = 4;
   string kind = 5;
}

message CloseProducerResponse {
   string peerId = 1;
}
```
## closeConsumer
 Closes a consumer.

```proto
message CloseConsumerRequest {
   string peerId = 1;
   string roomId =2;
   string consumerId = 3;
}

message CloseConsumerResponse {
   string peerId = 1;
   string roomId = 2;
}
```

## pauseProducer
 Pauses a producer.

```proto
message PauseProducerRequest {
   string roomId = 1;
   string peerId = 2;
   string producerId = 3;
}

message PauseProducerResponse {}
```
## resumeProducer
 Resumes a producer.

```proto
message ResumeProducerRequest {
   string roomId = 1;
   string peerId = 2;
   string producerId = 3;
}

message ResumeProducerResponse {}
```
## batchCloseProducers
 Closes multiple producers.

```proto
message BatchCloseProducersRequest {
   message CloseProducerRecord {
      string peerId = 1;
      repeated string producerIds = 2;
   }

   repeated CloseProducerRecord repeatedCloseProducers = 1;
   string roomId = 2;
}

message BatchCloseProducersResponse {
   string status = 1;
}
```
## batchCloseConsumers
 Closes multiple consumers.

```proto
message BatchCloseConsumersRequest {
   repeated string peerIds = 1;
   string roomId = 2;
}

message BatchCloseConsumersResponse {
   string status = 1;
}
```
## restartTransportIce
 Restarts ICE for a transport.

```proto
message RestartIceRequest {
    string peerId = 1;
    string roomId = 2;
    string transportId = 3;
    string transportType = 4;
 }

message RestartIceResponse {
   string peerId = 1;
   string transportType = 2;
   ProtoIceParameters iceParameters = 3;
}
```

## closePeer
 Closes a peer.

```proto
message ClosePeerRequest {
   string peerId = 1;
   string roomId = 2;
}

message ClosePeerResponse {
   string peerId = 1;
   string roomId = 2;
}
```
## closeRoom
 Closes a room.

```proto
message CloseRoomRequest {
   string roomId = 1;
}

message CloseRoomResponse {
   string roomId = 1;
}
```
## resumeConsumer
 Resumes a consumer.

```proto
message ResumeConsumerRequest {
   string peerId = 1;
   string roomId = 2;
   string consumerId = 3;
}

message ResumeConsumerResponse {
   string peerId = 1;
   string consumerId = 2;
}
```
## createDataConsumer
 Creates a data consumer.

```proto
message createDataConsumerRequest {
  string label = 1;
  string peerId = 2;
  string roomId = 3;
}

message ConsumeDataResponse {
  string id = 1;
  string dataProducerId = 2;
  ProtoSctpStreamParameters sctpStreamParameters = 3;
  string label = 4;
  string protocol = 5;
  map<string, string> appData = 6;
  string peerId = 7;
}
```
