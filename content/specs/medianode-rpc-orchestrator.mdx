---
title: MediaNode RPC Endpoints for Orchestrator
---

The media node exposes several RPC endpoints to handle requests from the Orchestrator.

## createRoom
**Description:** Creates a new room.

**Request:** CreateRoomRequest
```proto
message CreateRoomRequest {
       roomId: string;
     }
```

**Response:** CreateRoomResponse

```proto
message CreateRoomResponse {
   string roomId = 1;
}
```

## joinRoom
**Description:** Joins an existing room.

**Request:** JoinRoomRequest
```proto
message JoinRoomRequest {
   string roomId = 1;
   string peerId = 2;
 }
 ```

**Response:** JoinRoomResponse
```proto
message JoinRoomResponse {
   string roomId = 1;
   string peerId = 2;
   ProtoRtpCapabilities rtpCapabilities = 4;
}
```

## createTransportOnServer
**Description:** Creates a transport on the server.

**Request:** CreateTransportRequest
```proto
message CreateTransportRequest {
   string roomId = 1;
   string peerId = 2;
   string transportType = 3;
   ProtoSctpCapabilities sctpCapabilities = 4;
}
```


**Response:** CreateTransportResponse

```proto
message CreateTransportResponse {
   string peerId = 1;
   ProtoTransportSDPInfo transportSDPInfo = 4;
}
```

## connectTransportOnServer
**Description:** Connects a transport on the server.

**Request:** ConnectTransportRequest

```proto
message ConnectTransportRequest {
   string peerId = 1;
   string roomId = 2;
   string transportType = 3;
   ProtoDtlsParameters dtlsParameters = 4;
}
```

**Response:** ConnectTransportResponse

```proto
message ConnectTransportResponse {
   string peerId = 1;
   string transportId = 2;
}
```

## produce
**Description:** Produces media.

**Request:** ProduceRequest

```proto
message ProduceRequest {
   string peerId = 1;
   string roomId = 2;
   string kind = 3;
   bool paused = 4;
   string label = 5;
   ProtoRtpParameters rtpParameters = 6;
}
```

**Response:** ProduceResponse

```proto
message ProduceResponse {
   string peerId = 1;
   string producerId = 2;
   string label = 3;
}
```

## produceData
**Description:** Produces data.

**Request:** ProduceDataRequest
```proto
message ProduceDataRequest {
   string peerId = 1;
   string roomId = 2;
   string label = 3;
   string protocol = 4;
   ProtoSctpStreamParameters sctpStreamParameters = 5;
   string transportId = 6;
   map<string, string> appData = 7;
}
```

**Response:** ProduceDataResponse
```proto
message ProduceDataResponse {
   string id = 1;
   string dataProducerId = 2;
   ProtoSctpStreamParameters sctpStreamParameters = 3;
   string label = 4;
   string protocol = 5;
   map<string, string> appData = 6;
   string peerId = 7;
}
```

## consume
**Description:** Consumes media.

**Request:** ConsumeRequest
```proto
message ConsumeRequest {
   string peerId = 1;
   string roomId = 2;
   string producerPeerId = 3;
   string producerId = 4;
   string momoId = 5;
   string label = 6;
}
```
**Response:** ConsumeResponse
```proto
message ConsumeResponse {
   string peerId = 1;
   string label = 2;
   string consumerId = 3;
   string producerId = 4;
   string producerPeerId = 5;
   string kind = 6;
   ProtoRtpParameters rtpParameters = 7;
}
```

## createPipeTransport
**Description:** Creates a pipe transport.

**Request:** CreatePipeTransportRequest

```proto
message CreatePipeTransportRequest {
    string roomId = 1;
    string remoteIp = 2;
    string remoteMomoId = 3;
 }
 ```
**Response:** CreatePipeTransportResponse
```proto
message CreatePipeTransportResponse {
   string roomId = 1;
   string localMomoId = 2;
   string remoteMomoId = 3;
   string transportId = 4;
   ProtoSrtpParameters srtpParameters = 5;
   ProtoTransportTuple tuple = 6;
}
```
## connectPipeTransport
**Description:** Connects a pipe transport.

**Request:** ConnectPipeTransportRequest
```proto
message ConnectPipeTransportRequest {
   string roomId = 1;
   string remoteIp = 2;
   string remoteMomoId = 3;

   string transportId = 4;
   ProtoSrtpParameters srtpParameters = 5;
   ProtoTransportTuple tuple = 6;
}
```
**Response:** ConnectPipeTransportResponse
```proto
message ConnectPipeTransportResponse {
   string roomId = 1;
   string remoteMomoId = 2;
   string remoteMomoIp = 3;
}
```
## pipeConsumer
**Description:** Pipes a consumer.

**Request:** PipeConsumerRequest
```proto
message PipeConsumeRequest {
   string roomId = 1;
   string remoteMomoId = 2;
   string producerId = 3;
   string producerPeerId = 4;
}
```
**Response:** PipeConsumeResponse
```proto
message PipeConsumeResponse {
   string roomId = 1;
   string producerPeerId = 2;
   ProtoRtpParameters rtpParameters = 3;
   string label = 4;
   string kind = 5;
}
```

## pipeProducer
**Description:** Pipes a producer.

**Request:** PipeProducerRequest

```proto
message PipeProduceRequest {
   string roomId = 1;
   string kind = 2;
   string remoteMomoId = 3;
   string producerId = 4;
   string producerPeerId = 5;
   ProtoRtpParameters rtpParameters = 6;
   string label = 7;
}
```

**Response:** PipeProduceResponse
```proto
message PipeProduceResponse {
   string roomId = 1;
   string pipeProducerId = 2;
   bool status = 3;
}
```
## closeProducer
**Description:** Closes a producer.

**Request:** CloseProducerRequest

```proto
message CloseProducerRequest {
   string peerId = 1;
   string roomId = 2;
   string producerId = 3;
   string momoId = 4;
   string kind = 5;
}
```
**Response:** CloseProducerResponse
```proto
message CloseProducerResponse {
   string peerId = 1;
}
```
## closeConsumer
**Description:** Closes a consumer.

**Request:** CloseConsumerRequest
```proto
message CloseConsumerRequest {
   string peerId = 1;
   string roomId =2;
   string consumerId = 3;
}
```
**Response:** CloseConsumerResponse
```proto
message CloseConsumerResponse {
   string peerId = 1;
   string roomId = 2;
}
```

## pauseProducer
**Description:** Pauses a producer.

**Request:** PauseProducerRequest
```proto
message PauseProducerRequest {
   string roomId = 1;
   string peerId = 2;
   string producerId = 3;
}
```

**Response:** PauseProducerResponse
```proto
message PauseProducerResponse {}
```
## resumeProducer
**Description:** Resumes a producer.

**Request:** ResumeProducerRequest
```proto
message ResumeProducerRequest {
   string roomId = 1;
   string peerId = 2;
   string producerId = 3;
}
```
**Response:** ResumeProducerResponse
```proto
message ResumeProducerResponse {}
```
## batchCloseProducers
**Description:** Closes multiple producers.

**Request:** BatchCloseProducersRequest
```proto
message BatchCloseProducersRequest {
   message CloseProducerRecord {
      string peerId = 1;
      repeated string producerIds = 2;
   }

   repeated CloseProducerRecord repeatedCloseProducers = 1;
   string roomId = 2;
}
```
**Response:** BatchCloseProducersResponse
```proto
message BatchCloseProducersResponse {
   string status = 1;
}
```
## batchCloseConsumers
**Description:** Closes multiple consumers.

**Request:** BatchCloseConsumersRequest
```proto
message BatchCloseConsumersRequest {
   repeated string peerIds = 1;
   string roomId = 2;
}
```
**Response:** BatchCloseConsumersResponse
```proto
message BatchCloseConsumersResponse {
   string status = 1;
}
```
## restartTransportIce
**Description:** Restarts ICE for a transport.

**Request:** RestartTransportIceRequest

```proto
message RestartIceRequest {
    string peerId = 1;
    string roomId = 2;
    string transportId = 3;
    string transportType = 4;
 }
 ```
**Response:** RestartIceResponse
```proto
message RestartIceResponse {
   string peerId = 1;
   string transportType = 2;
   ProtoIceParameters iceParameters = 3;
}
```

## closePeer
**Description:** Closes a peer.

**Request:** ClosePeerRequest
```proto
message ClosePeerRequest {
   string peerId = 1;
   string roomId = 2;
}
```
**Response:** ClosePeerResponse
```proto
message ClosePeerResponse {
   string peerId = 1;
   string roomId = 2;
}
```
## closeRoom
**Description:** Closes a room.

**Request:** CloseRoomRequest
```proto
message CloseRoomRequest {
   string roomId = 1;
}
```
**Response:** CloseRoomResponse
```proto
message CloseRoomResponse {
   string roomId = 1;
}
```
## resumeConsumer
**Description:** Resumes a consumer.

**Request:** ResumeConsumerRequest
```proto
message ResumeConsumerRequest {
   string peerId = 1;
   string roomId = 2;
   string consumerId = 3;
}
```
**Response:** ResumeConsumerResponse
```proto
message ResumeConsumerResponse {
   string peerId = 1;
   string consumerId = 2;
}
```
## createDataConsumer
**Description:** Creates a data consumer.

**Request:** CreateDataConsumerRequest
```proto
message createDataConsumerRequest {
  string label = 1;
  string peerId = 2;
  string roomId = 3;
}
```
**Response:** ConsumeDataResponse
```proto
message ConsumeDataResponse {
  string id = 1;
  string dataProducerId = 2;
  ProtoSctpStreamParameters sctpStreamParameters = 3;
  string label = 4;
  string protocol = 5;
  map<string, string> appData = 6;
  string peerId = 7;
}
```
